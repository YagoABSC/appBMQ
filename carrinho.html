<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/style.css">
    <title> Meu Carrinho</title>
    <!-- Biblioteca de icones -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <!-- Link para a biblioteca Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
    <!-- Link para a biblioteca de ICONS-->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

</head>

<body>
    <header>
        <nav class="navbar">
            <button class="menu-toggle" id="menuToggle">
                <ion-icon name="menu"></ion-icon>
            </button>
            <img src="assets/img/logo.png" alt="Logo" class="logo">
            <div class="menu-icons">
                <a id="searchIcon"><ion-icon name="search"></ion-icon></a>
                <a href="cadastrologin.html"><ion-icon name="person"></ion-icon></a>
            </div>
            <div class="dropdown-menu" id="dropdownMenu">
                <ul>
                    <div class="header-drop">
                        <img src="assets/img/exemplo-perfil.webp" alt="" class="img-perfil">
                    </div>
                    <span id="span-nome">Nome sobrenome</span>
                    <li class="menu-list"><a href="index.html"><i class="fa-solid fa-house"></i>Inicio</a></li>
                    <li class="menu-list"><a href="questionario.html"><ion-icon
                                name="newspaper-sharp"></ion-icon>Questionario</a></li>
                    <li class="menu-list"><a href="assinaturas.html"><ion-icon name="star-sharp"></ion-icon>Minhas
                            assinaturas</a></li>
                    <li class="menu-list"><a href="diario.html"><ion-icon name="happy-sharp"></ion-icon>Meu humor</a>
                    </li>
                    <li class="menu-list"><a href="indicacoes.html"><ion-icon name="flame"></ion-icon>Indicações</a>
                    </li>
                    <li class="menu-list"><a href="configuracoes.html"><ion-icon name="cog"></ion-icon>Configurações</a>
                    </li>
                    <li class="menu-list"><a href="termos.html"><ion-icon name="lock-closed"></ion-icon>Termos de
                            privacidade</a></li>
                    <li class="menu-list"><a href="#"><ion-icon name="exit-outline"></ion-icon>Sair</a></li>
                </ul>
            </div>
        </nav>
        <div class="search-container" id="searchContainer">
            <div class="search-input" id="searchInput">
                <input type="text" id="searchField" placeholder="Buscar...">
                <ion-icon class="search-icon" name="search-outline"></ion-icon>
            </div>
        </div>
    </header>

    <main class="conteudo-questionario">
        <h2>Seu kit está pronto!</h2>
        <p>Tratamento escolhido: <span id="tratamentoEscolhido">Aromaterapia</span></p>


        <div class="product-card-container">

            <hr class="separador-carrinho">

            <div class="product-card" id="card1">

                <div class="logo-card">
                    <img src="assets/img/logo.png" alt="logo">

                    <i class='bx bxs-trash-alt'></i>
                </div>

                <div class="main-images">
                    <img id="main-img1-card1" class="main-img active" src="assets/img/imagem8.jpeg" alt="img1">
                    <img id="main-img2-card1" class="main-img" src="assets/img/imagem12.jpeg" alt="img2">
                    <img id="main-img3-card1" class="main-img" src="assets/img/imagem7.jpeg" alt="img3">
                    <span class="product-details">
                        <h3>Produto1</h3>
                        <p>Detalhes do meu pequeno teste Lorem ipsum dolor sit, amet consectetur adipisicing elit.</p>
                    </span>
                </div>

                <hr class="card-line">

                <div class="change-product">
                    <div class="options-product">
                        <span>Outras opções:</span>
                        <div class="img-options">
                            <img class="option active" data-target="main-img1-card1" src="assets/img/imagem8.jpeg"
                                alt="imagem de opções" data-title="Produto1"
                                data-description="Detalhes do meu pequeno teste Lorem ipsum dolor sit, amet consectetur adipisicing elit.">
                            <img class="option" data-target="main-img2-card1" src="assets/img/imagem12.jpeg"
                                alt="imagem de opções" data-title="Produto2"
                                data-description="Detalhes do meu segundo produto Lorem ipsum dolor sit amet, consectetur adipisicing elit.">
                            <img class="option" data-target="main-img3-card1" src="assets/img/imagem7.jpeg"
                                alt="imagem de opções" data-title="Produto3"
                                data-description="Detalhes do meu terceiro produto Lorem ipsum dolor sit amet, consectetur adipisicing elit.">
                        </div>
                    </div>
                </div>
            </div>

            <div id="container-button-prod">
                <span class="descricao-kit-questionario">Você pode adicionar até 5 produtos</span>
                <button id="addProduto" class="btnQuestionario">Adicionar</button>

            </div>

            <hr class="separador-carrinho">

            <div class="tipoAssinatura" method="post" action="#">


                <h3>Forma de Assinatura</h3>

                <label class="cateAssinatura">
                    <input type="radio" required name="plano" checked> Mensal - R$100,00 </label>

                <label class="cateAssinatura">
                    <input type="radio" required name="plano"> Trimestral - R$250,00 (Recomendado)
                </label>


            </div>

            <hr class="separador-carrinho">

            <div class="infoPessoais">
                <h3>Dados Pessoais para entrega</h3>
                <a>
                    <p>Informe CPF <i class='bx bx-chevron-right'></i></p>
                    <span class="cpf-carrinho">___.___.___-__</span>
                </a>
                

                <a>
                    <p>Informe CEP <i class='bx bx-chevron-right'></i></p>
                    <span class="cpf-carrinho">___.___.___-__</span>
                </a>
            </div>

            <hr class="separador-carrinho">

            <div class="tipoPagamento">
                <h3>Forma de Pagamento</h3>
                <a>
                    <p>Selecione a forma de pagamento <i class='bx bx-chevron-right'></i></p>
                    
                </a>
            </div>

            <button class="btnQuestionario">Assinar</button>

        </div>

    </main>

    <script>
        // Função para atualizar a imagem principal e os textos
        function updateMainContent(option, parentCard) {
            let activeOption = parentCard.querySelector(".img-options .active");
            if (activeOption) {
                activeOption.classList.remove("active");
            }
            option.classList.add("active");

            let activeImg = parentCard.querySelector(".main-images .active");
            if (activeImg) {
                activeImg.classList.remove("active");
            }

            parentCard.querySelector(`.main-images #${option.dataset.target}`).classList.add("active");

            let title = parentCard.querySelector(".product-details h3");
            let description = parentCard.querySelector(".product-details p");

            title.textContent = option.dataset.title;
            description.textContent = option.dataset.description;
        }

        // Adiciona evento de clique às opções de imagem
        document.querySelectorAll(".img-options .option").forEach(option => {
            option.addEventListener("click", (e) => {
                let parentCard = option.closest(".product-card");
                updateMainContent(option, parentCard);
            });
        });

        // Adiciona evento de clique ao ícone de lixeira
        document.querySelectorAll('.bxs-trash-alt').forEach(icon => {
            icon.addEventListener('click', (e) => {
                let parentCard = e.target.closest('.product-card');
                parentCard.remove();
                updateCardCount();
            });
        });

        // Função para atualizar a contagem de cards
        function updateCardCount() {
            const count = document.querySelectorAll('.product-card').length;
            console.log(`Número de cards: ${count}`);
        }

        // Função para criar um novo card
        function createNewCard(cardId) {
            const cardTemplate = document.createElement('div');
            cardTemplate.classList.add('product-card');
            cardTemplate.id = cardId;
            cardTemplate.innerHTML = `
                <div class="logo-card">
                    <img src="assets/img/logo.png" alt="logo">
                    <i class='bx bxs-trash-alt'></i>
                </div>
                <div class="main-images">
                    <img id="main-img1-${cardId}" class="main-img active" src="assets/img/imagem8.jpeg" alt="img1">
                    <img id="main-img2-${cardId}" class="main-img" src="assets/img/imagem12.jpeg" alt="img2">
                    <img id="main-img3-${cardId}" class="main-img" src="assets/img/imagem7.jpeg" alt="img3">
                    <span class="product-details">
                        <h3>Produto1</h3>
                        <p>Detalhes do meu pequeno teste Lorem ipsum dolor sit, amet consectetur adipisicing elit.</p>
                    </span>
                </div>
                <hr class="card-line">
                <div class="change-product">
                    <div class="options-product">
                        <span>Outras opções:</span>
                        <div class="img-options">
                            <img class="option active" data-target="main-img1-${cardId}" src="assets/img/imagem8.jpeg"
                                alt="imagem de opções" data-title="Produto1" data-description="Detalhes do meu pequeno teste Lorem ipsum dolor sit, amet consectetur adipisicing elit.">
                            <img class="option" data-target="main-img2-${cardId}" src="assets/img/imagem12.jpeg"
                                alt="imagem de opções" data-title="Produto2" data-description="Detalhes do meu segundo produto Lorem ipsum dolor sit amet, consectetur adipisicing elit.">
                            <img class="option" data-target="main-img3-${cardId}" src="assets/img/imagem7.jpeg"
                                alt="imagem de opções" data-title="Produto3" data-description="Detalhes do meu terceiro produto Lorem ipsum dolor sit amet, consectetur adipisicing elit.">
                        </div>
                    </div>
                </div>
            `;
            const container = document.querySelector('.product-card-container');
            const buttonContainer = document.getElementById('container-button-prod');
            container.insertBefore(cardTemplate, buttonContainer);

            // Adiciona eventos ao novo card
            const newCard = document.getElementById(cardId);
            newCard.querySelectorAll(".img-options .option").forEach(option => {
                option.addEventListener("click", (e) => {
                    let parentCard = option.closest(".product-card");
                    updateMainContent(option, parentCard);
                });
            });

            newCard.querySelector('.bxs-trash-alt').addEventListener('click', (e) => {
                let parentCard = e.target.closest('.product-card');
                parentCard.remove();
                updateCardCount();
            });

            updateCardCount();
        }

        // Adiciona evento de clique ao botão de adicionar
        document.getElementById('addProduto').addEventListener('click', () => {
            const count = document.querySelectorAll('.product-card').length;
            if (count < 5) {
                createNewCard(`card${count + 1}`);
            } else {
                alert("Você só pode adicionar no máximo 5 produtos.");
            }
        });

        updateCardCount();
    </script>
</body>

</html>